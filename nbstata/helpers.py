# AUTOGENERATED! DO NOT EDIT! File to edit: ../nbs/01_helpers.ipynb.

# %% auto 0
__all__ = ['set_pystata_path', 'launch_stata']

# %% ../nbs/01_helpers.ipynb 3
import os
import sys
from packaging import version
from . import utils

# %% ../nbs/01_helpers.ipynb 4
def set_pystata_path(path=None):
    if path == None:
        path, _ = utils.find_dir_edition()
    if not os.path.isdir(path):
        raise OSError(path + ' is invalid')
    if not os.path.isdir(os.path.join(path, 'utilities')):
        raise OSError(path + " is not Stata's installation path")
    sys.path.append(os.path.join(path, 'utilities'))

# %% ../nbs/01_helpers.ipynb 5
def launch_stata(path=None, edition=None, splash=True):
    """
    We modify stata_setup to make splash screen optional
    """
    if path == None or edition == None:
        path_found, edition_found = utils.find_dir_edition()
        path = path_found if path==None else path
        edition = edition_found if edition==None else edition
    set_pystata_path(path)
    import pystata
    if version.parse(pystata.__version__) >= version.parse("0.1.1"):
        # Splash message control is a new feature of pystata-0.1.1
        pystata.config.init(edition,splash=splash)
    else:
        pystata.config.init(edition)
